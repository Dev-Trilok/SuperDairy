@model Core.Model.Bill
@{
    ViewData["Title"] = "Generate Bill";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="col-lg-6">
    <div class="mb-3">
        <label asp-for="UserId" class="control-label">User Id :</label>
        <div class="row g-0">
            <div class="col-9">
                <select class="user-id-selector form-select" tabindex="1" onchange="setUserId(event)" data-placeholder="Select User">
                    <option></option>
                    @foreach (var user in (ViewData["Users"] as List<Core.Model.User>))
                    {
                        <option value="@user.Id">@user.Name</option>
                    }
                </select>
            </div>
            <div class="col-3">
                <input asp-for="UserId" min="100" type="number" placeholder="User Id" onchange="changeUser(event)"
                       tabindex="1" class="form-control" />
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="day" class="control-label">Date :</label>
        <div class="row">
            <div class="col-4">
                <select id="day" class="form-select" aria-label="Select Day">
                    <option selected>Select Day</option>
                    <option value="1">01-10</option>
                    <option value="11">11-20</option>
                    <option value="21">21-31</option>
                </select>
            </div>
            <div class="col-8">
                <input type="month" class="form-control" id="month">
            </div>
        </div>
    </div>
    <div class="text-center">
        <div class="btn btn-success" onclick="generateBill()">Generate</div>
    </div>
</div>
@*@section Stylesheet{
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
}*@


@*@section Scripts {
@{
await Html.RenderPartialAsync("_ValidationScriptsPartial");
}
*@

@section Scripts{
<script>
    function changeUser(e) {
        $(".user-id-selector").val(e.currentTarget.value).trigger('change');
    }
    function setUserId(event){
        $("#UserId").val(event.currentTarget.value);
    }
    function generateBill(){
        let userId=$("#UserId").val();
        let day=$("#day").val();
        let month=$("#month").val();
        if(!day){
            $("#day").focus();

        }
        let date=new Date(month);
        date.setDate(day);
        
    }
    $(function() {
    const monthControl = document.querySelector('input[type="month"]');
const date= new Date()
const month=("0" + (date.getMonth() + 1)).slice(-2)
const year=date.getFullYear()
monthControl.value = `${year}-${month}`;
});
    
</script>
}